<div class="card border-primary mt-3">
    <div class="card-header text-white bg-success" align="center">
        <h3><%= @trip.user.full_name %>'s Trip</h3>
    </div>
    <div class="card-text" align="center">
        <p><%= @trip.pickup_time.localtime.strftime("%B %e, %Y at %l:%M %p") %></p>
        <p><%= "Space left for #{@trip.remaining_space} bags" %></p>
    </div>

    <%= button_to "Cancel Trip", trip_path(@trip.id), method: :delete, data: {confirm: 'Deny Pickup?'}, class: "btn col-9 mb-3" %>
</div>

<%= flash.notice %>

<% if @trip.pickups.length > 0 %>
<div class="card border-primary mt-3">  
    <div class="card-header text-white bg-success" align="center">
        <h3>Pickups</h3>
    </div>
      <% @trip.pickups.each do |pickup| %>
        <% unless pickup.completed? %>
          <div class="card-text" align="center">
      	    <p><%= pickup.recycler_name %></p>
      	    <p><%= pickup.address %></p>
      	    <p>Number of Bags: <%= pickup.num_bags %><p>
      	    <% case pickup.status %>
      	    <% when "created" %>
              <%= button_to "Accept", pickups_update_path(pickup.id), data: {confirm: 'Accept Pickup?'}, class: "btn col-9 mb-3" %>
              <%= button_to "Deny", pickup_path(pickup.id), method: :delete, data: {confirm: 'Deny Pickup?'}, class: "btn col-9 mb-3" %>
            <% when "accepted" %>
              <%= button_to "Complete", pickups_update_path(pickup.id), data: {confirm: 'Pickup Completed?'}, class: "btn col-9 mb-3" %>
            <% when "picked_up" %>
              Pending
            <% end %>
          </div>
        <% end %>
      <% end %>
    <% end %>
</div>